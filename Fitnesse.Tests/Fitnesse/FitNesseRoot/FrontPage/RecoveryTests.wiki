---
Test
---
!include PageBase

Agent should rest when the user has enabled resting and the player is missing magic or health points.

|Fitnesse.Tests.Fixtures.RecoveryTests                                                                                                                    |
|has aggro|is fighting|status effect|hpp current|mpp current|is magic enabled|is health enabled|high health|low health|high magic|low magic|resting score?|
|false    |false      |none         |50         |50         |true            |true             |100        |0         |100       |0        |40            |

Agent should heal when user cannot rest and has a healing move available. 

|Fitnesse.Tests.Fixtures.RecoveryTests|
|can rest  |has healing move  |score? |
|false     |false             |0      |
|true      |false             |0      |
|true      |true              |40     |
|false     |true              |0      |

Agent with given state cannot transition to following states.

|State Transitions                                                                   |
|Rest  |Summon, Follow, Approach, Battle, End, Heal, Pull, Start, Travel, Weaponskill|
|Summon|Approach, Pull, Travel                                                       |
|Heal  |Travel                                                                       |

How does the agent decide which actions to execute next?
1. Sort states by priority. 
2. Filter out states blocked by transitions
3. Check if state is applicable. 
4. Run states which are runnable. 